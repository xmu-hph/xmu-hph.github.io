---
title: tts use note
date: 2024-05-14 10:54:00 +0800
categories: [tools,notes]
tags: [tools]     # TAG names should always be lowercase
math: true
mermaid: true
img_path: /commons/2024-03-30-CS_series_class_review/
author: hupenghui
---

## tts

ttså°±æ˜¯æ–‡å­—è½¬å½•ä¸ºè¯­éŸ³ï¼Œæœ¬æ–‡ä½¿ç”¨äº†xtts-v2æ¨¡å‹ã€‚è¿™ä¸ªæ¨¡å‹æ•ˆæœè¿˜å¯ä»¥å°±æ˜¯ç”¨èµ·æ¥å¾ˆå‚»é€¼ã€‚æ¨¡å‹ä¸‹è½½åˆ°æœ¬åœ°åä½¿ç”¨TTSç±»æ¯æ¬¡éƒ½ä¼šé‡å¤ä¸‹è½½ï¼Œåœ¨githubçš„closedè§£å†³æ–¹æ¡ˆä¸­æå‡ºå‡çº§ttsï¼Œä½†æ˜¯åµç”¨æ²¡æœ‰ï¼Œå¯èƒ½åœ¨å½“æ—¶æ˜¯æœ‰ç”¨çš„ã€‚äº’è”ç½‘ä¸Šçš„èµ„æºæ›´æ–°å¾ˆå¿«ï¼Œæœ‰å¿…è¦æŠŠè¿‡æ—¶ã€æ— æ•ˆçš„èµ„æºéƒ½åˆ é™¤æ‰ã€‚æœ¬æ–‡æ—¶é—´ä¸º`2024-05-14`ã€‚
åŸæœ¬æƒ³å†™åœ¨ä¸­æ–‡ç¤¾åŒºä¸­ï¼Œä½†æ˜¯çŸ¥ä¹è¦æ‰‹æœºç‰ˆappéªŒè¯èº«ä»½ï¼Œcsdné‡Œé¢å¤åˆ¶ä»£ç è¦ç™»é™†ï¼Œä»–ä»¬ä¸¤ä¸ªçš„åšæ´¾æˆ‘éƒ½ä¸å–œæ¬¢ï¼Œè®©æˆ‘è§‰å¾—æ¶å¿ƒğŸ¤¢ğŸ¤®ã€‚æ‰€ä»¥å°±å†™åœ¨githubä¸­ã€‚

## use

ä½¿ç”¨pipå®‰è£…å¥½TTSä»¥åï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½æ¨¡å‹ï¼Œæ¨¡å‹åŸæœ¬ä½äºhuggingfaceä¸Šï¼Œå¥½åœ¨modelscopeä¸Šæœ‰äººåšäº†å…‹éš†ï¼Œä½†æ˜¯å¾ˆé—æ†¾ï¼Œå…‹éš†çš„åº”è¯¥æ˜¯è¿‡æœŸäº†ï¼Œè·Ÿæœ€æ–°çš„ä¸åŒ¹é…ã€‚æ‰€ä»¥å°±ç®—æŠŠmodelscopeä¸Šçš„æ¨¡å‹ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¹¶æ”¾åœ¨`/root/.local/share/tts/**`ä¸­ä¹Ÿæ— æ³•æŒ‰ç…§å®˜æ–¹çš„ä»£ç ï¼š

```sh
from TTS.api import TTS
tts = TTS("tts_models/multilingual/multi-dataset/xtts_v2", gpu=True)

# generate speech by cloning a voice using default settings
tts.tts_to_file(text="It took me quite a long time to develop a voice, and now that I have it I'm not going to be silent.",
                file_path="output.wav",
                speaker_wav="/path/to/target/speaker.wav",
                language="en")

# generate speech by cloning a voice using custom settings
tts.tts_to_file(text="It took me quite a long time to develop a voice, and now that I have it I'm not going to be silent.",
                file_path="output.wav",
                speaker_wav="/path/to/target/speaker.wav",
                language="en",
                decoder_iterations=30)
```

å»ä½¿ç”¨ï¼Œå› ä¸ºä»–æ¯æ¬¡éƒ½ä¼šæ ¡éªŒæ¨¡å‹ï¼Œå¦‚æœæœ‰æ›´æ–°å°±è¦é‡æ–°ä¸‹è½½ï¼Œè¿‡äºğŸ¤¢ğŸ¤®ã€‚æ‰€ä»¥ä»–å€’é—­äº†ä¹Ÿä¸è§‰å¾—æ„å¤–ã€‚å› æ­¤ä¸ç”¨å°è¯•ä½¿ç”¨è¿™ç§å°è£…çš„å½¢å¼ï¼Œåº”è¯¥ä½¿ç”¨ç›´æ¥åŠ è½½æ¨¡å‹è¿è¡Œçš„å½¢å¼ã€‚

```bash
from TTS.tts.configs.xtts_config import XttsConfig
from TTS.tts.models.xtts import Xtts

config = XttsConfig()
config.load_json("/path/to/xtts/config.json")
model = Xtts.init_from_config(config)
model.load_checkpoint(config, checkpoint_dir="/path/to/xtts/", eval=True)
model.cuda()

outputs = model.synthesize(
    "It took me quite a long time to develop a voice and now that I have it I am not going to be silent.",
    config,
    speaker_wav="/data/TTS-public/_refclips/3.wav",
    gpt_cond_len=3,
    language="en",
)
```

è¿™ç§æ˜¯æ­£å¸¸è¿è¡Œçš„ã€‚
